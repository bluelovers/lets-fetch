"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Created by user on 2019/6/5.
 */
const index_1 = __importDefault(require("../../index"));
const axios_1 = __importDefault(require("axios"));
const Axios_1 = __importDefault(require("axios/lib/core/Axios"));
class LetsWrapAxios extends index_1.default {
    constructor(options) {
        super(options);
        this.$http = this.defaultHttp(this.options);
    }
    defaultHttp(options) {
        return toRequestLike(this.createAxios(options));
    }
    createAxios(options) {
        options = options || {};
        if (isAxios(options.$http)) {
            Object.assign(options.$http.defaults, options.$http.defaults, options.requestOptions);
            return options.$http;
        }
        return axios_1.default.create(options.requestOptions);
    }
    requestOption(options, url) {
        let ro = super.requestOption(options, url);
        Object.entries(options)
            .forEach(([k, v]) => {
            if (ro[k] == null) {
                ro[k] = v;
            }
        });
        return ro;
    }
}
exports.LetsWrapAxios = LetsWrapAxios;
function isAxios(axios) {
    return (axios instanceof Axios_1.default);
}
exports.isAxios = isAxios;
function toRequestLike(axios) {
    return index_1.default.toRequestLike(axios, axios);
}
exports.toRequestLike = toRequestLike;
exports.default = LetsWrapAxios;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXhpb3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvYWRhcHRlci9heGlvcy9heGlvcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBOztHQUVHO0FBQ0gsd0RBQXNGO0FBQ3RGLGtEQUE4RjtBQUU5RixpRUFBOEM7QUFLOUMsTUFBYSxhQUFpRyxTQUFRLGVBQTJDO0lBRWhLLFlBQVksT0FBNkQ7UUFFeEUsS0FBSyxDQUFDLE9BQWMsQ0FBQyxDQUFDO1FBRXRCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDNUMsQ0FBQztJQUVELFdBQVcsQ0FBQyxPQUE2RDtRQUV4RSxPQUFPLGFBQWEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVELFdBQVcsQ0FBQyxPQUE2RDtRQUV4RSxPQUFPLEdBQUcsT0FBTyxJQUFJLEVBQVMsQ0FBQztRQUUvQixJQUFJLE9BQU8sQ0FBSyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQzlCO1lBQ0MsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7WUFFdEYsT0FBTyxPQUFPLENBQUMsS0FBSyxDQUFBO1NBQ3BCO1FBRUQsT0FBTyxlQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQU8sQ0FBQTtJQUNsRCxDQUFDO0lBRUQsYUFBYSxDQUFDLE9BQTRELEVBQUUsR0FBWTtRQUV2RixJQUFJLEVBQUUsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztRQUUzQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQzthQUNyQixPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFO1lBR25CLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksRUFDakI7Z0JBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUNWO1FBRUYsQ0FBQyxDQUFDLENBQ0Y7UUFFRCxPQUFPLEVBQUUsQ0FBQztJQUNYLENBQUM7Q0FDRDtBQTlDRCxzQ0E4Q0M7QUFFRCxTQUFnQixPQUFPLENBQTJDLEtBQUs7SUFFdEUsT0FBTyxDQUFDLEtBQUssWUFBWSxlQUFVLENBQUMsQ0FBQTtBQUNyQyxDQUFDO0FBSEQsMEJBR0M7QUFFRCxTQUFnQixhQUFhLENBQW9GLEtBQVM7SUFFekgsT0FBTyxlQUFRLENBQUMsYUFBYSxDQUFhLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQTtBQUN4RCxDQUFDO0FBSEQsc0NBR0M7QUFFRCxrQkFBZSxhQUFhLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDE5LzYvNS5cbiAqL1xuaW1wb3J0IExldHNXcmFwLCB7IFN5bWJvbFJlcXVlc3QsIElMZXRzV3JhcE9wdGlvbnMsIElIdHRwUmVxdWVzdCB9IGZyb20gJy4uLy4uL2luZGV4JztcbmltcG9ydCBBeGlvcywgeyBBeGlvc0luc3RhbmNlLCBBeGlvc1JlcXVlc3RDb25maWcsIEF4aW9zUmVzcG9uc2UsIEF4aW9zUHJvbWlzZSB9IGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IElMZXRzV3JhcEZldGNoT3B0aW9ucyB9IGZyb20gJy4uL2ZldGNoJztcbmltcG9ydCBBeGlvc0NsYXNzIGZyb20gJ2F4aW9zL2xpYi9jb3JlL0F4aW9zJztcbmltcG9ydCBCbHVlYmlyZCBmcm9tICdibHVlYmlyZCdcblxuZXhwb3J0IHR5cGUgSUh0dHBSZXF1ZXN0QXhpb3M8TzMgZXh0ZW5kcyBBeGlvc1JlcXVlc3RDb25maWcgPSBBeGlvc1JlcXVlc3RDb25maWcsIFIzIGV4dGVuZHMgQXhpb3NSZXNwb25zZSA9IEF4aW9zUmVzcG9uc2UsIFQzIGV4dGVuZHMgQXhpb3NJbnN0YW5jZSA9IEF4aW9zSW5zdGFuY2U+ID0gSUh0dHBSZXF1ZXN0PE8zLCBSMywgVDM+XG5cbmV4cG9ydCBjbGFzcyBMZXRzV3JhcEF4aW9zPE80IGV4dGVuZHMgQXhpb3NSZXF1ZXN0Q29uZmlnLCBSNCBleHRlbmRzIEF4aW9zUmVzcG9uc2UsIFQ0IGV4dGVuZHMgQXhpb3NJbnN0YW5jZT4gZXh0ZW5kcyBMZXRzV3JhcDxJSHR0cFJlcXVlc3RBeGlvczxPNCwgUjQsIFQ0PiwgTzQ+XG57XG5cdGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBJTGV0c1dyYXBPcHRpb25zPElIdHRwUmVxdWVzdEF4aW9zPE80LCBSNCwgVDQ+LCBPND4pXG5cdHtcblx0XHRzdXBlcihvcHRpb25zIGFzIGFueSk7XG5cblx0XHR0aGlzLiRodHRwID0gdGhpcy5kZWZhdWx0SHR0cCh0aGlzLm9wdGlvbnMpXG5cdH1cblxuXHRkZWZhdWx0SHR0cChvcHRpb25zPzogSUxldHNXcmFwT3B0aW9uczxJSHR0cFJlcXVlc3RBeGlvczxPNCwgUjQsIFQ0PiwgTzQ+KTogSUh0dHBSZXF1ZXN0PE80LCBSNCwgVDQ+XG5cdHtcblx0XHRyZXR1cm4gdG9SZXF1ZXN0TGlrZSh0aGlzLmNyZWF0ZUF4aW9zKG9wdGlvbnMpKTtcblx0fVxuXG5cdGNyZWF0ZUF4aW9zKG9wdGlvbnM/OiBJTGV0c1dyYXBPcHRpb25zPElIdHRwUmVxdWVzdEF4aW9zPE80LCBSNCwgVDQ+LCBPND4pOiBUNFxuXHR7XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge30gYXMgYW55O1xuXG5cdFx0aWYgKGlzQXhpb3M8VDQ+KG9wdGlvbnMuJGh0dHApKVxuXHRcdHtcblx0XHRcdE9iamVjdC5hc3NpZ24ob3B0aW9ucy4kaHR0cC5kZWZhdWx0cywgb3B0aW9ucy4kaHR0cC5kZWZhdWx0cywgb3B0aW9ucy5yZXF1ZXN0T3B0aW9ucyk7XG5cblx0XHRcdHJldHVybiBvcHRpb25zLiRodHRwXG5cdFx0fVxuXG5cdFx0cmV0dXJuIEF4aW9zLmNyZWF0ZShvcHRpb25zLnJlcXVlc3RPcHRpb25zKSBhcyBUNFxuXHR9XG5cblx0cmVxdWVzdE9wdGlvbihvcHRpb25zOiBJTGV0c1dyYXBPcHRpb25zPElIdHRwUmVxdWVzdEF4aW9zPE80LCBSNCwgVDQ+LCBPND4sIHVybD86IHN0cmluZylcblx0e1xuXHRcdGxldCBybyA9IHN1cGVyLnJlcXVlc3RPcHRpb24ob3B0aW9ucywgdXJsKTtcblxuXHRcdE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpXG5cdFx0XHQuZm9yRWFjaCgoW2ssIHZdKSA9PlxuXHRcdFx0e1xuXG5cdFx0XHRcdGlmIChyb1trXSA9PSBudWxsKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cm9ba10gPSB2O1xuXHRcdFx0XHR9XG5cblx0XHRcdH0pXG5cdFx0O1xuXG5cdFx0cmV0dXJuIHJvO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0F4aW9zPFQ0IGV4dGVuZHMgQXhpb3NJbnN0YW5jZSA9IEF4aW9zSW5zdGFuY2U+KGF4aW9zKTogYXhpb3MgaXMgVDRcbntcblx0cmV0dXJuIChheGlvcyBpbnN0YW5jZW9mIEF4aW9zQ2xhc3MpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b1JlcXVlc3RMaWtlPE8zIGV4dGVuZHMgQXhpb3NSZXF1ZXN0Q29uZmlnLCBSMyBleHRlbmRzIEF4aW9zUmVzcG9uc2UsIFQzIGV4dGVuZHMgQXhpb3NJbnN0YW5jZT4oYXhpb3M6IFQzKTogSUh0dHBSZXF1ZXN0PE8zLCBSMywgVDM+XG57XG5cdHJldHVybiBMZXRzV3JhcC50b1JlcXVlc3RMaWtlPE8zLCBSMywgVDM+KGF4aW9zLCBheGlvcylcbn1cblxuZXhwb3J0IGRlZmF1bHQgTGV0c1dyYXBBeGlvc1xuXG4iXX0=